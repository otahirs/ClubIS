@page "/admin/finance"
@page "/admin/finance/{PanelIndex:int}"
@inject HttpClient Http
@attribute [Authorize(Policy = Policy.Finance)]

<MudContainer MaxWidth="MaxWidth.Large" Class="mt-16">
    <MudText Typo="Typo.h3" GutterBottom="true">Admin finance</MudText>
    <MudTabs @ref="@tabs" Elevation="1">
        <MudTabPanel Text="Events" >
            <MudContainer MaxWidth="MaxWidth.Large">
                <FinanceEvents />
            </MudContainer>
        </MudTabPanel>
        <MudTabPanel Text="Users">
            <MudContainer MaxWidth="MaxWidth.Large">
                <FinanceUsers />
            </MudContainer>
        </MudTabPanel>
        <MudTabPanel Text="MemberFees">
            <MudContainer MaxWidth="MaxWidth.Large" Class="mt-8">
                <FinanceMemberFees />
            </MudContainer>
        </MudTabPanel>
        <MudTabPanel Text="Claims">
            <MudContainer MaxWidth="MaxWidth.Large" Class="mt-8">
                <FinanceClaims />
            </MudContainer>
        </MudTabPanel>
    </MudTabs>
</MudContainer>

@code {
    [Parameter]
    public int PanelIndex { get; set; }
    MudTabs tabs;
    protected override void OnAfterRender(bool firstRender)
    {
        if (PanelIndex >= 0 && PanelIndex < tabs.Panels.Count)
        {
            tabs.ActivatePanel((int)PanelIndex);
        }
    }
}

